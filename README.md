# TaskMate P2P 团队协作工具

这是一款专为小型团队设计的去中心化（P2P）任务管理工具。它无需中央服务器，通过 P2P 网络同步数据，确保信息安全且完全掌控在团队手中。

## 🌟 核心特性

*   **去中心化**：内置 **Syncthing** 核心进行 P2P 数据同步（**支持局域网 + 互联网远程同步**），无服务器依赖。
*   **零配置网络**：软件内直接集成 P2P 网络管理，支持查看本机 ID、添加远程设备、管理同步文件夹。
*   **双重安全**：
    1.  **传输层**：使用 TLS 加密传输，必须互加“设备 ID”才能建立连接，未经授权的设备无法接入网络。
    2.  **数据层**：TaskMate 对文件内容进行 AES-256 二次加密，即使文件被拦截，无“团队密钥”也无法查看内容。
*   **简单易用**：晨间计划、晚间复盘，两步走工作流，清晰直观。
*   **看板可视化**：
    *   **未完成任务**：自动标记为红色并划线。
    *   **临时新增任务**：自动标记为绿色“新”字标签。
*   **跨平台**：完美支持 Windows 和 macOS。

## 📸 界面预览

### 每日计划与复盘
![每日计划](https://i.ibb.co/3ymwXjK/image.png)

### 团队看板
![团队看板](https://i.ibb.co/C0M1gXx/image.png)

---

## 🛠️ 快速开始

### 1. 启动与配置
首次打开软件，您需要完成“基本设置”：
*   **您的姓名**: 请输入易于识别的昵称（如 "Alice"），将显示在看板上。
*   **团队密钥**: **这是解密的关键！** 请输入团队约定的统一密码。全员必须完全一致，否则会提示“解密失败”。
*   **同步文件夹**: 选择一个本地文件夹作为数据存储目录（例如 `D:\TaskMate_Data`）。

### 2. 组建 P2P 网络（只需一次）
切换到 **“P2P 网络”** 标签页进行组网：

1.  **互相添加设备**：
    *   点击“复制”获取您的 **本机 ID** 发给队友。
    *   点击 **“+ 添加设备”**，输入队友的 ID 和名称。
    *   *注意：双方必须互相添加对方 ID 才能连接成功。*

2.  **创建并共享文件夹**：
    *   点击 **“+ 添加文件夹”**。
    *   **文件夹 ID**：输入一个全员统一的 ID（例如 `taskmate-data`）。
    *   **本地路径**：选择步骤 1 中设置的同一个文件夹。
    *   **共享给设备**：勾选所有队友。
    *   队友操作：当收到共享请求后，同样添加该文件夹，并确保 ID 一致。

---

## 📖 使用指南

### 每日工作流

#### ☀️ 晨间计划 (Morning)
1.  点击右上角的 **“我的今日看板”**。
2.  点击 **“📑 复制昨日”** 快速导入昨天未完成的工作（可选）。
3.  在 **左侧 (今日目标)** 列表，点击 **“+ 添加目标”**，输入今天要完成的任务。
4.  点击 **“保存并同步”**。您的计划将即时推送到团队看板。

#### 🌙 晚间复盘 (Evening)
1.  再次打开 **“我的今日看板”**。
2.  点击中间的 **“➡ 同步”** 按钮，将早上的计划复制到右侧。
3.  **勾选**已完成的任务。
4.  如果有临时新增的工作，直接在右侧点击 **“+ 添加完成项”**（会自动标记为绿色“新”）。
5.  如果有任务没完成，**取消勾选**（会自动标记为红色删除线）。
6.  点击 **“保存并同步”**。

### 查看团队进度
主界面即是团队看板。当 P2P 网络同步完成后，界面会自动刷新，展示所有人的最新进度。
*   点击顶部的日期切换按钮 `◀` `▶`，可以回顾历史记录。

---

## 📦 开发与构建

### 环境要求
*   Node.js (v14+)
*   npm

### 运行源码
1.  安装依赖：
    ```bash
    npm install
    ```
2.  启动开发版：
    ```bash
    npm start
    ```

### 跨平台打包
*   **Windows**:
    ```bash
    npm run dist
    ```
    产物位于 `dist/` 目录。

*   **macOS**:
    1.  **重要**：请确保下载 macOS 版 `syncthing` 二进制文件，并放置在 `bin/syncthing`（无后缀）。
    2.  运行构建命令：
    ```bash
    npm run dist:mac
    ```

---

## ❓ 常见问题排查

**Q: 为什么我看不到别人的任务？**
A: 
1. 进入 **“P2P 网络”** 设置，检查远程设备是否显示“正常”（绿色）。如果显示“断开”，请检查网络连接。
2. 检查同步文件夹是否已正确共享给对方。
3. 检查软件右上角的日期是否是“今天”。

**Q: 看到红色提示“⚠️ 解密失败：团队密钥不匹配”？**
A: 这说明文件同步过来了，但您的密码错了。请进入设置重新输入正确的团队密钥。

**Q: macOS 上无法启动同步服务？**
A: 首次运行时系统可能会拦截 `syncthing` 二进制文件。请前往“系统偏好设置 -> 安全性与隐私”，允许 `syncthing` 运行。
